
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>135. Candy [Hard] Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="435. Non-overlapping Intervals.html" />
    
    
    <link rel="prev" href="455. Assign Cookies.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Chapter1 Greedy
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="455. Assign Cookies.html">
            
                <a href="455. Assign Cookies.html">
            
                    
                    455. Assign Cookies [Easy]
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2" data-path="135. Candy.html">
            
                <a href="135. Candy.html">
            
                    
                    135. Candy [Hard]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="435. Non-overlapping Intervals.html">
            
                <a href="435. Non-overlapping Intervals.html">
            
                    
                    435. Non-overlapping Intervals [Medium]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="376. Wiggle Subsequence.html">
            
                <a href="376. Wiggle Subsequence.html">
            
                    
                    376. Wiggle Subsequence [Medium]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="605. Can Place Flowers.html">
            
                <a href="605. Can Place Flowers.html">
            
                    
                    605. Can Place Flowers [Easy]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="452. Minimum Number of Arrows to Burst Balloons.html">
            
                <a href="452. Minimum Number of Arrows to Burst Balloons.html">
            
                    
                    452. Minimum Number of Arrows to Burst Balloons [Medium]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="763. Partition Labels.html">
            
                <a href="763. Partition Labels.html">
            
                    
                    763. Partition Labels [Medium]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="122. Best Time to Buy and Sell Stock II.html">
            
                <a href="122. Best Time to Buy and Sell Stock II.html">
            
                    
                    122. Best Time to Buy and Sell Stock II [Easy]
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.9" data-path="135. Candy.html">
            
                <a href="135. Candy.html">
            
                    
                    406. Queue Reconstruction by Height [Medium]
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="665. Non-decreasing Array.html">
            
                <a href="665. Non-decreasing Array.html">
            
                    
                    665. Non-decreasing Array [Easy]
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >135. Candy [Hard]</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="135-candy-hard"><a href="https://leetcode.com/problems/candy/" target="_blank">135. Candy</a> [Hard]</h1>
<h2 id="problem-description"><strong>Problem Description:</strong></h2>
<p>There are <em>N</em> children standing in a line. Each child is assigned a rating value.</p>
<p>You are giving candies to these children subjected to the following requirements:</p>
<ul>
<li>Each child must have at least one candy.</li>
<li>Children with a higher rating get more candies than their neighbors.</li>
</ul>
<p>What is the minimum candies you must give?</p>
<p><strong>Example 1:</strong></p>
<pre><code>Input: [1,0,2]
Output: 5
Explanation: You can allocate to the first, second and third child with 2, 1, 2 candies respectively.
</code></pre><p><strong>Example 2:</strong></p>
<pre><code>Input: [1,2,2]
Output: 4
Explanation: You can allocate to the first, second and third child with 1, 2, 1 candies respectively.
             The third child gets 1 candy because it satisfies the above two conditions.
</code></pre><hr>
<h2 id="anaylsis"><strong>Anaylsis:</strong></h2>
<p>The intuition of this problem would be to traverse the array and assign to local minimum ratings one candy and add one more to its neighbors. But one may get stuck at finding the local minimums. On one hand, they are related only to their neighbors and can not be found through sorting. On the other hand, if simply traverse the array with a greedy policy from left to right, one may not know how many candies to assign to a larger rating that comes first, because the number ratings that are less than the current one remains unknown.</p>
<p>But the thing is that this problem is not that complicated. The requirements of this problem is equivalent to the following:</p>
<ul>
<li><code>ratings[i] &gt;= 1</code></li>
<li>if <code>ratings[i] &lt; ratings[i+1]</code>, then <code>candies[i] &lt; candies[i+1]</code></li>
<li>if <code>ratings[i] &gt; ratings[i+1]</code>, then <code>candies[i] &gt; candies[i+1]</code></li>
</ul>
<p>In fact, the second rule can be realized by traversing greedily from left to right and third from right to left. </p>
<p>Initialize all <code>candies[i]</code> to 1. First traverse from left to right. If <code>ratings[i] &lt; ratings[i+1]</code>, then <code>candies[i+1] = candies[i] + 1</code>. Secondly, traverse from left to right. If <code>ratings[i-1] &gt; ratings[i]</code>, then <code>candies[i-1] = max(candies[i] + 1, candies[i])</code>. Using the <code>max</code> function guarantees that the second rule still holds.</p>
<h2 id="code"><strong>Code:</strong></h2>
<pre><code class="lang-cpp"><span class="hljs-keyword">class</span> Solution {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">candy</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; ratings)</span> </span>{
        <span class="hljs-keyword">int</span> n = ratings.size();
        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; candies(n, <span class="hljs-number">1</span>);
        <span class="hljs-comment">// traverse from left to right</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n<span class="hljs-number">-1</span>; i++) {
            <span class="hljs-keyword">if</span> (ratings[i+<span class="hljs-number">1</span>] &gt; ratings[i]) {
                candies[i+<span class="hljs-number">1</span>] = candies[i] + <span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-comment">// traverse from right to left</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n<span class="hljs-number">-1</span>; i &gt; <span class="hljs-number">0</span>; i--) {
            <span class="hljs-keyword">if</span> (ratings[i<span class="hljs-number">-1</span>] &gt; ratings[i]) {
                candies[i<span class="hljs-number">-1</span>] = max(candies[i] + <span class="hljs-number">1</span>, candies[i<span class="hljs-number">-1</span>]);
            }
        }
        <span class="hljs-comment">// summing the number of candies together</span>
        <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
            res += candies[i];
        }
        <span class="hljs-keyword">return</span> res;
    }
};
</code></pre>
<h2 id="complexity"><strong>Complexity:</strong></h2>
<ul>
<li><p>The time complexities of traversing from left to right, right to left and summing up the number of candies are all <code>O(n)</code>. Thus, the time complexity of this algorithm is <code>O(n)</code>.</p>
</li>
<li><p>The extra space in this algorithm is used for storing the <code>candies</code> array, which is <code>O(n)</code> space complexity, and some variables like <code>n</code> and <code>res</code>, which are <code>O(1)</code> complexity. Thus, the space complexity of this algorithm is also <code>O(n)</code>.</p>
</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="455. Assign Cookies.html" class="navigation navigation-prev " aria-label="Previous page: 455. Assign Cookies [Easy]">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="435. Non-overlapping Intervals.html" class="navigation navigation-next " aria-label="Next page: 435. Non-overlapping Intervals [Medium]">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"135. Candy [Hard]","level":"1.2.2","depth":2,"next":{"title":"435. Non-overlapping Intervals [Medium]","level":"1.2.3","depth":2,"path":"Greedy/435. Non-overlapping Intervals.md","ref":"Greedy/435. Non-overlapping Intervals.md","articles":[]},"previous":{"title":"455. Assign Cookies [Easy]","level":"1.2.1","depth":2,"path":"Greedy/455. Assign Cookies.md","ref":"Greedy/455. Assign Cookies.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Greedy/135. Candy.md","mtime":"2020-12-18T14:47:46.989Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-06T16:29:51.968Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

